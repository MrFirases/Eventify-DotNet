@model IEnumerable<Eventify.Data.Models.Reservation>

@{
    ViewBag.Title = "StatisticsbyEventsAndTickets";
}


@section scripts{


<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/amcharts/amcharts.js" type="text/javascript"></script>
<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/amcharts/serial.js" type="text/javascript"></script>
<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/amcharts/pie.js" type="text/javascript"></script>
<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/amcharts/radar.js" type="text/javascript"></script>
<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/amcharts/themes/light.js" type="text/javascript"></script>
<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/amcharts/themes/patterns.js" type="text/javascript"></script>
<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/amcharts/themes/chalk.js" type="text/javascript"></script>
<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/ammap/ammap.js" type="text/javascript"></script>
<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/ammap/maps/js/worldLow.js" type="text/javascript"></script>
<script src="@Url.Content("~/Content/")assets/global/plugins/amcharts/amstockcharts/amstock.js" type="text/javascript"></script>



    <script>

        var ChartsAmcharts = function() {

            var initChartReservationByEvents = function() {
                var chart = AmCharts.makeChart("ReservationByEvents_chart",
                    {
                        "theme": "light",
                        "type": "serial",
                        "startDuration": 2,

                        "fontFamily": 'Open Sans',

                        "color": '#888',

                        "dataProvider": [
                                @foreach (dynamic item in @ViewBag.reservationsByEvents)
                                {
                                    <text> {
                                    "country": "@item.reservationState",
                                    "visits": 5555 ,
                                    "color": "#FF0F00"
                                },</text>
                                }
                            
                        ],
                        "valueAxes": [
                            {
                                "position": "left",
                                "axisAlpha": 0,
                                "gridAlpha": 0
                            }
                        ],
                        "graphs": [
                            {
                                "balloonText": "[[category]]: <b>[[value]]</b>",
                                "colorField": "color",
                                "fillAlphas": 0.85,
                                "lineAlpha": 0.1,
                                "type": "column",
                                "topRadius": 1,
                                "valueField": "visits"
                            }
                        ],
                        "depth3D": 40,
                        "angle": 30,
                        "chartCursor": {
                            "categoryBalloonEnabled": false,
                            "cursorAlpha": 0,
                            "zoomable": false
                        },
                        "categoryField": "country",
                        "categoryAxis": {
                            "gridPosition": "start",
                            "axisAlpha": 0,
                            "gridAlpha": 0

                        },
                        "exportConfig": {
                            "menuTop": "20px",
                            "menuRight": "20px",
                            "menuItems": [
                                {
                                    "icon": '/lib/3/images/export.png',
                                    "format": 'png'
                                }
                            ]
                        }
                    },
                    0);

                jQuery('.chart_5_chart_input')
                    .off()
                    .on('input change',
                        function() {
                            var property = jQuery(this).data('property');
                            var target = chart;
                            chart.startDuration = 0;

                            if (property == 'topRadius') {
                                target = chart.graphs[0];
                            }

                            target[property] = this.value;
                            chart.validateNow();
                        });

                $('#ReservationByEvents_chart')
                    .closest('.portlet')
                    .find('.fullscreen')
                    .click(function() {
                        chart.invalidateSize();
                    });
            }


            return {
                //main function to initiate the module

                init: function () {

                    initChartReservationByEvents();
                }

            };

        }();


        jQuery(document)
    .ready(function () {
        ChartsAmcharts.init();

    });



    </script>

}

<h2>Specific Insights</h2>

<div class="row">
    <div class="col-md-12">
        <!-- BEGIN CHART PORTLET-->
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-bar-chart font-green-haze"></i>
                    <span class="caption-subject bold uppercase font-green-haze"> 3D Chart</span>
                    <span class="caption-helper">3d cylinder chart</span>
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse"> </a>
                    <a href="#portlet-config" data-toggle="modal" class="config"> </a>
                    <a href="javascript:;" class="reload"> </a>
                    <a href="javascript:;" class="fullscreen"> </a>
                    <a href="javascript:;" class="remove"> </a>
                </div>
            </div>
            <div class="portlet-body">
                <div id="chartReservationByEvents_chart_5" class="chart" style="height: 400px;"> </div>
                <div class="well margin-top-20">
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="text-left">Top Radius:</label>
                            <input class="chart_5_chart_input" data-property="topRadius" type="range" min="0" max="1.5" value="1" step="0.01" />
                        </div>
                        <div class="col-sm-3">
                            <label class="text-left">Angle:</label>
                            <input class="chart_5_chart_input" data-property="angle" type="range" min="0" max="89" value="30" step="1" />
                        </div>
                        <div class="col-sm-3">
                            <label class="text-left">Depth:</label>
                            <input class="chart_5_chart_input" data-property="depth3D" type="range" min="1" max="120" value="40" step="1" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END CHART PORTLET-->
    </div>

</div>


<table>
    @foreach (dynamic item in @ViewBag.reservationsByEvents)
    {
        <tr>
            <td>@item.id</td>
            <td>@item.amount</td>
        </tr>
    }


</table>